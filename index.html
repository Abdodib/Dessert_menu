<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Text:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="index.css">
  <script src="./index.js"> </script>
  <title>Frontend Mentor | Product list with cart</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet üëç -->
 
</head>
<body>

  <div class="Desert">
    <div class="main">
      <h1>Desserts</h1>
    <div class="menu">
      <div class="colum">
        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-waffle-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> waffle</p>
          <p id="description" class="desc"> waffle with berries</p>
          <p id="price">$ <span  class="price"> 6.50</span> </p>
        </div>

        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-creme-brulee-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> Cr√®me Br√ªl√©e</p>
          <p id="description" class="desc"> Vanilla Bean Cr√®me Br√ªl√©e</p>
          <p id="price">$ <span id="price" class="price"> 7.00</span> </p>
        </div>

        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-macaron-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> Macaron</p>
          <p id="description" class="desc"> Macaron Mix of Five</p>
          <p id="price">$ <span id="price" class="price"> 8.00</span> </p>
        </div>

        

      </div>
      <div class="colum">

        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-tiramisu-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> tiramisu</p>
          <p id="description" class="desc"> Classic tiramisu</p>
          <p id="price">$ <span id="price" class="price"> 5.50</span> </p>
        </div>

        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-baklava-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> Baklava</p>
          <p id="description" class="desc"> Pistachio Baklavae</p>
          <p id="price">$ <span id="price" class="price"> 4.00</span> </p>
        </div>
        
          <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-meringue-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> Pie</p>
          <p id="description" class="desc"> Lemon Meringue</p>
          <p id="price">$ <span id="price" class="price"> 5.00</span> </p>
        </div>
        
        

      </div>
      <div class="colum">

        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-cake-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> Cake</p>
          <p id="description" class="desc"> Red Velvet Cake</p>
          <p id="price">$ <span id="price" class="price"> 4.50</span> </p>
        </div>

        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-brownie-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> Brownie</p>
          <p id="description" class="desc"> Salted Caramel Brownie</p>
          <p id="price">$ <span id="price" class="price"> 5.50</span> </p>
        </div>

        <div class="produit">
          <img src="" alt="">
          <div class="addto">
            <img src="./assets/images/image-panna-cotta-desktop.jpg" alt="" class="img thump">
            <div class="btn1"    onclick="hide(this); ajouter (this);">
            <img src="./assets/images/icon-add-to-cart.svg" alt="" style="width: 18px; height: 15px">
              <p >Add to Cart</p>
          
            </div>
            <div class="btn2" >
              <img src="./assets/images/icon-increment-quantity.svg" alt="" style="width: 10px;" onclick="addQuantity(this)">
              <p >1</p>
              <img src="./assets/images/icon-decrement-quantity.svg" alt="" style="width: 10px;" onclick="removeQuantity(this)">
              
            </div>
          </div>
          <p id="name"> Panna Cotta</p>
          <p id="description" class="desc"> Vanilla Panna Cotta</p>
          <p id="price">$ <span id="price" class="price"> 6.50</span> </p>
        </div>

        
      </div>
    
    
      
    </div>
    </div>
    <!-------------------->
    
      
      
      
      
    
  <div class="cart">
    <p>your cart : <span id="total">0</span></p>
    <div class="list"></div>
    <img src="./assets/images/illustration-empty-cart.svg" alt="" class="empty-cart">
    
    <h6>your added items will appear here</h6>
  </div>  
  </div>
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge">Frontend Mentor</a>. 
    Coded by <a href="#">Your Name Here</a>.
  </div>
</body>



<script>
  document.querySelectorAll(".btn2").forEach((btnContainer) => {
    let countElement = btnContainer.querySelector("p"); // √âl√©ment du compteur
    let count = parseInt(countElement.textContent) || 0; // Convertir en nombre, √©viter NaN

    btnContainer.querySelector("img:first-child").addEventListener("click", () => {
        count++;
        countElement.textContent = count;
    });

    btnContainer.querySelector("img:last-child").addEventListener("click", (event) => {
        if (count > 0) {
            count--;
            countElement.textContent = count;
        }

        if (count === 0) {
            let productElement = btnContainer.closest(".produit"); // Trouver le produit associ√©
            
                let name = productElement.querySelector(".desc").textContent
            let cartImg =  document.querySelector(".empty-cart");

            
              for (let i = cart.length - 1; i >= 0; i--) {
                  if (cart[i].description === name) {
                      cart.splice(i, 1);
                    }
                  }
                  afficherProduit();
                  if(cart.length===0){cartImg.style.display = "block";};
                  countElement.textContent = "1";
                  updateTotal();
                
          console.log(cart);
          

            inversehide(event.target); // Masquer l'√©l√©ment
        }
    });
});


function hide(divv) {
  let produitDiv = divv.closest(".produit"); // ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ£ŸÇÿ±ÿ® div ÿ®ŸÄ .produit
 // ÿπŸÜÿµÿ± ÿßŸÑÿµŸàÿ±ÿ© ÿØÿßÿÆŸÑ div .produit
  if (!produitDiv) return; // ÿ™ÿ£ŸÉÿØ ÿ£ŸÜ ÿßŸÑÿπŸÜÿµÿ± ŸÖŸàÿ¨ŸàÿØ

  let btn1 = produitDiv.querySelector(".btn1");
  let btn2 = produitDiv.querySelector(".btn2");
  let produitImg = produitDiv.querySelector(".img");
  if (btn1 && btn2 && produitImg) {
      btn1.style.display = "none";
      btn2.style.display = "flex";
      produitImg.style.border = "5px solid #c73a0f";
  }
  
}

function inversehide(divv) {
  let produitDiv = divv.closest(".produit"); // ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ£ŸÇÿ±ÿ® div ÿ®ŸÄ .produit
 // ÿπŸÜÿµÿ± ÿßŸÑÿµŸàÿ±ÿ© ÿØÿßÿÆŸÑ div .produit
  if (!produitDiv) return; // ÿ™ÿ£ŸÉÿØ ÿ£ŸÜ ÿßŸÑÿπŸÜÿµÿ± ŸÖŸàÿ¨ŸàÿØ

  let btn1 = produitDiv.querySelector(".btn1");
  let btn2 = produitDiv.querySelector(".btn2");
  let produitImg = produitDiv.querySelector(".img");
  if (btn1 && btn2 && produitImg) {
      btn1.style.display = "flex";
      btn2.style.display = "none";
      produitImg.style.border = "none";
  }
}
let cart =  [];
function ajouter (prod) {
  let product = prod.closest(".produit");
  let conter = product.querySelector(".btn2");
  let quant = conter.textContent;
  
  let produit = {
    Image: product.querySelector(".thump").src,
    description: product.querySelector(".desc").textContent,
    price: parseFloat(product.querySelector(".price").textContent), // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ≥ÿπÿ± ÿ•ŸÑŸâ ÿ±ŸÇŸÖ
    quantity: parseInt(quant), // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÉŸÖŸäÿ© ÿ•ŸÑŸâ ÿ±ŸÇŸÖ ÿµÿ≠Ÿäÿ≠
    totalprice: parseInt(quant) * parseFloat(product.querySelector(".price").textContent) // ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ
};

  cart.push(produit);
    console.log(cart);
    afficherProduit();
    updateTotal();
    
    
  
}

function produitExist(p) {
  return cart.some(pro => pro.name === p.name); // ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ®ŸÜŸÅÿ≥ ÿßŸÑÿßÿ≥ŸÖ
}




function addQuantity(prod) {
  let product = prod.closest(".produit");
  let conter = product.querySelector(".btn2");
  let quant = conter.textContent;
  let produit = {
    Image: product.querySelector(".thump").src,
    description: product.querySelector(".desc").textContent,
    price: parseFloat(product.querySelector(".price").textContent), // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ≥ÿπÿ± ÿ•ŸÑŸâ ÿ±ŸÇŸÖ
    quantity: parseInt(quant), // ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÉŸÖŸäÿ© ÿ•ŸÑŸâ ÿ±ŸÇŸÖ ÿµÿ≠Ÿäÿ≠
    totalprice: parseInt(quant) * parseFloat(product.querySelector(".price").textContent) // ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ
};
  for (let i = cart.length - 1; i >= 0; i--) {
    if (cart[i].description === produit.description) {
   cart[i].quantity+=1;
   cart[i].totalprice = cart[i].quantity * cart[i].price;
    }

  }
  afficherProduit();
  console.log(cart);
}
function removeQuantity(prod) {
  let product = prod.closest(".produit");
  let conter = product.querySelector(".btn2");
  let produit = {
    Image : product.querySelector(".thump").src,
    description : product.querySelector(".desc").textContent,
    price : product.querySelector(".price").textContent,
    quantity: conter ? parseInt(conter.querySelectorAll("p")[1]?.textContent) || 1 : 1
  };
  for (let i = cart.length - 1; i >= 0; i--) {
    if (cart[i].description === produit.description) {
 
    cart[i].quantity -=1;
    }

  }
  afficherProduit();
  console.log(cart);
}

function afficherProduit() {
  let cartContainer = document.querySelector(".list");
  cartContainer.innerHTML = ""; // Clear the container before adding new items

  for (let i = 0; i < cart.length; i++) {
    cartContainer.innerHTML += `
      <div class="cart-item">
        <div class="info">
          <span class="name">${cart[i].description}</span>
          <div class="qp">
            <span class="quantity">${cart[i].quantity}</span>
            <span class="prix">$${cart[i].price}</span>
            <span class="total">$${cart[i].totalprice}</span> 
          </div>
        </div>
        <button class="remove" onclick="removeFromCart(${i})">&times;</button>
      </div>
    `;
  }
  document.querySelector(".empty-cart").style.display = "none";
}
function updateTotal(){
  let total = document.getElementById("total");
total.textContent = cart.length ;
}
  
</script>
</html>
